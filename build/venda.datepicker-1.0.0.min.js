!function(a){"use strict";function b(a,b){var c;return c={version:"0.0.1",template:{wrapper:["#{header}",'<div class="wrapper">','<div class="datepicker">#{datepicker}</div>','<div class="times">','<div class="scrollbar up"><i class="fa fa-caret-up"></i></div>','<div class="scrolly">#{times}</div>','<div class="scrollbar down"><i class="fa fa-caret-down"></i></div>',"</div>","</div>"],header:['<div class="header inline">','<div class="inline previous direction on #{size}" data-month="#{monthprevious}"',' data-year="#{yearprevious}">&lt;&lt;</div>','<div class="inline monthyear #{size}">#{month}&nbsp;#{year}</div>','<div class="inline next direction on #{size}" data-month="#{monthnext}"',' data-year="#{yearnext}">&gt;&gt;</div>',"</div>"],datepicker:['<table class="datepicker-table">','<thead><tr class="daynames">#{daynames}</tr></thead>',"#{days}","</table>"],selectDate:['<select class="availabledates">#{options}</select>'],selectTime:['<select class="availabletimes">#{options}</select>'],addDate:['<input type="button" class="adddate" value="Add date" />'],optionDate:['<option data-date="#{value}" value="#{value}">#{name}</option>'],optionTime:['<option data-time="#{time}" value="#{value}">#{value}</option>']},html:{},dates:{},checks:{},selectDates:[],isVisble:!1,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],options:{datepickerContainer:".container",selectContainer:".select",hideSelectsOnDatePicker:!1,nextDayDelivery:!0,nddCutoffTime:15,useRange:!0,rangeInDays:14,firstDayDiff:1,largeDeviceSmoothScroll:!0,scrollSpeed:80,timeSeparationInMinutes:30,showTimes:!0,startHour:9,endHour:22},init:function(a){return this.setOptions(a).getNow().processDisabledDates().createTimeArray().createTimeList().calculateDatepicker(),this},changeDateInDatepicker:function(a){return b(".datepicker-day").removeClass("clicked"),b('.datepicker-day[data-date="'+a+'"]').addClass("clicked"),this},changeDateInSelect:function(a){return b('option[data-date="'+a+'"]').prop("selected","selected"),this},changeTimeInDatepicker:function(a){return b(".datetime").removeClass("clicked"),b('.datetime[data-time="'+a+'"]').addClass("clicked"),this},changeTimeInSelect:function(a){return b('option[data-time="'+a+'"]').prop("selected","selected"),this},getHeader:function(a){return util.applyTemplate(this.template.header,this.getHeaderObj(a))},getDateSelect:function(){var a,b,c,d,e;b=this.template.optionDate.join(""),c=[];for(var f=0,g=this.selectDates.length;g>f;f++)d=this.selectDates[f].split(" ")[1],a=b.replace("#{name}",this.selectDates[f]).replace("#{value}",this.getShortDate(d),"gi"),c.push(a);return e=util.applyTemplate(this.template.selectDate,{options:c.join("")}),this.selectDates=[],e},getTimeSelect:function(){var a,b,c,d,e;b=[],d=this.template.optionTime.join("");for(var f=0,g=this.timeArray.length;g>f;f++)c=this.timeArray[f],e=d.replace("#{value}",c.hr+":"+c.mi,"g").replace("#{time}",c.hr+""+c.mi),b.push(e);return a=util.applyTemplate(this.template.selectTime,{options:b.join("")})},generateOneLiner:function(){var a,b,c,d;return a=this.getHeader("small"),b=this.getDateSelect(),c=this.getTimeSelect(),d=this.template.addDate.join(""),this.html.select=this.options.showTimes?a+b+c+d:a+b+d,this},toggleDatepicker:function(){return this.isVisble?(b(this.options.datepickerContainer).hide(),this.options.hideSelectsOnDatePicker&&b(".mini").show()):(b(this.options.datepickerContainer).show(),this.initTimeBar(),this.options.hideSelectsOnDatePicker&&b(".mini").hide()),this.isVisble=!this.isVisble,this},formatTime:function(a){return a.substr(0,2)+":"+a.substr(2,2)},setOptions:function(a){return this.options=b.extend(this.options,a),this},processDisabledDates:function(){for(var a,b,c,d=0,e=this.options.inactive.dates.length;e>d;d++)a=this.options.inactive.dates[d],this.options.inactive.monthsStartAtZero||(a.month=a.month-1),b=new Date(a.year,a.month,0).getTime(),c=new Date(this.dates.now.fullYear,this.dates.now.month,0).getTime(),c>b&&(this.options.inactive.dates.splice(d,1),d--,e--);return this},calculateDatepicker:function(a){return this.clearSelectedDate().getCurrent(a).getPrevious().getNext().doChecks().generateDatepickerHTML().generateOneLiner().writeHTML().updateElements().initTimeBar(),this},initTimeBar:function(){return this.options.showTimes&&this.toggleScrollbarHighlight(),this},buildDateObj:function(a){return{date:a,day:a.getDate(),month:a.getMonth(),shortYear:a.getYear(),fullYear:a.getFullYear()}},getNow:function(){var a=new Date;return a.setHours(0,0,0,0),this.dates.now=this.buildDateObj(a),this},getCurrent:function(a){var b,c;return c=new Date,b=!a||a&&c.getMonth()===a.month&&c.getFullYear()===a.year?new Date:new Date(a.year,a.month,1),b.setHours(0,0,0,0),this.dates.current=this.buildDateObj(b),this},getPrevious:function(){var a=new Date(this.dates.current.fullYear,this.dates.current.month,1);return a.setMonth(a.getMonth()-1),this.dates.previous=this.buildDateObj(a),this},getNext:function(){var a=new Date(this.dates.current.fullYear,this.dates.current.month,1);return a.setMonth(a.getMonth()+1),this.dates.next=this.buildDateObj(a),this},getDaysInMonth:function(a,b){return[31,this.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][a]},isLeapYear:function(a){return 0===a%400||0===a%4&&0!==a%100||0===a},getDayLabels:function(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},getMonthLabel:function(a){return["January","February","March","April","May","June","July","August","September","October","November","December"][a]},rearrangeLabels:function(){var a,b,c;return a=this.getDayLabels(),b=a.slice(this.options.firstDayDiff,a.length),c=a.slice(0,this.options.firstDayDiff),b.concat(c)},getDays:function(){var a,b;a=[],b=0!==this.options.firstDayDiff?this.rearrangeLabels():this.getDayLabels();for(var c=0;6>=c;c++)a.push('<td class="datepicker-header-day">'),a.push(b[c]),a.push("</td>");return a.join("")},getHeaderObj:function(a){return{month:this.getMonthLabel(this.dates.current.month),year:this.dates.current.fullYear,monthprevious:this.dates.previous.month,yearprevious:this.dates.previous.fullYear,monthnext:this.dates.next.month,yearnext:this.dates.next.fullYear,size:a}},generateDatepickerHTML:function(){var a,b;return b=this.getHeader("large"),a={header:b,datepicker:this.generateDatepicker()},this.options.showTimes&&(a.times=this.html.timeList),this.html.all=util.applyTemplate(this.template.wrapper,a),this},writeHTML:function(){return b(this.options.selectContainer).html(this.html.select),b(this.options.datepickerContainer).html(this.html.all),this},updateElements:function(){return this.checks.isNowMonth&&this.toggleHeaderButton(".previous"),this.options.showTimes||(b(".times").remove(),b(".datepicker").css("borderRight","0"),b(".monthyear.large").width("199"),b(".direction.large").width("70")),this.options.useRange&&this.disableNextButton()&&this.toggleHeaderButton(".next"),this},toggleHeaderButton:function(a){return b(".header").find(a).removeClass("on"),this},disableNextButton:function(){return this.dates.current.day+this.options.rangeInDays<=this.getDaysInMonth(this.dates.current.month)},doChecks:function(){return this.isNowYear().isNowMonth(),this},isNowYear:function(){return this.checks.isNowYear=this.dates.current.fullYear===this.dates.now.fullYear,this},isNowMonth:function(){return this.checks.isNowMonth=this.checks.isNowYear&&this.dates.current.month===this.dates.now.month,this},isToday:function(a){return this.checks.isNowMonth&&a===this.dates.now.day},isPreviousDay:function(a){return this.checks.isNowYear&&this.checks.isNowMonth&&a<this.dates.now.day},isInactive:function(a){var b,c,d;d=this.dates.current,c=!1;for(var e=0,f=this.options.inactive.dates.length;f>e;e++)if(b=this.options.inactive.dates[e],a===b.day&&d.month===b.month&&d.fullYear===b.year){c=!0;break}return c},getShortDate:function(a){return util.applyTemplate("#{year}-#{month}-#{day}",{year:this.dates.current.fullYear,month:this.padNumber(this.dates.current.month),day:this.padNumber(a)})},getLongDate:function(a){var b,c,d;return b=new Date(this.dates.current.fullYear,this.dates.current.month,a),a=b.getDate(),c=this.days[b.getDay()],d=this.getMonthLabel(b.getMonth()),c+" "+a},collateDatesForSelect:function(a){var b=this.getLongDate(a);return this.selectDates.push(b),this},padNumber:function(a){return 1===a.toString().length?"0"+a:a},createTimeArray:function(){var a,b;this.timeArray=[];for(var c=this.options.startHour,d=this.options.endHour;d>=c;c++)for(var e=0,f=60;f>e;e+=this.options.timeSeparationInMinutes)a=this.padNumber(c),b=this.padNumber(e),this.timeArray.push({hr:a,mi:b});return this},createTimeList:function(){var a,b,c,d;a=[],c='<div class="datetime" data-time="#{time}">#{datetime}</div>';for(var e=0,f=this.timeArray.length;f>e;e++)d=this.timeArray[e],b=c.replace("#{datetime}",d.hr+":"+d.mi).replace("#{time}",d.hr+""+d.mi),a.push(b);return this.html.timeList=a.join(""),this},datepickerShowsCurrentMonthAndYear:function(){return this.dates.current.year===this.dates.now.year&&this.dates.current.month===this.dates.now.month},isNextDayDeliveryPossible:function(){return this.options.nextDayDelivery&&(new Date).getHours()<this.options.nddCutoffTime?!0:!1},isWeekendDay:function(a,b){var c=new Date(this.dates.current.fullYear,this.dates.current.month,b).getDay();return 0===a.getDay()&&0!==this.options.firstDayDiff?c%6===0||c%7===0?!0:!1:0===c||6===c?!0:!1},getDifferenceBetweenDates:function(a,b){var c,d,e;return e=864e5,c=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),d=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate()),Math.floor((d-c)/e)},isNextDay:function(a){return this.datepickerShowsCurrentMonthAndYear()&&a-this.dates.current.day===1},isWithinRange:function(a){var b,c,d;return b=new Date(this.dates.current.fullYear,this.dates.current.month,a),c=this.dates.now.date,d=this.getDifferenceBetweenDates(c,b),d<=this.options.rangeInDays},generateDatepicker:function(){var a,b,c,d,e,f,g,h,i,j,k;for(e=[],f=1,k=1,j=this.dates.current.date,b=new Date(this.dates.current.fullYear,this.dates.current.month,1),c=b.getDay()-this.options.firstDayDiff,-1===c&&(c=6),d=this.getDaysInMonth(this.dates.current.month,this.dates.current.fullYear),g=0;9>g;g++){for(h=0;6>=h;h++)a=[],i=d>=f&&(g>0||h>=c),i?(this.isToday(f)?a.push("today"):this.isPreviousDay(f)?a.push("pastday"):this.isInactive(f)||this.isNextDay(f)&&!this.isNextDayDeliveryPossible(f)?a.push("inactive"):this.options.useRange&&!this.isWithinRange(f)?a.push("outofrange"):(a.push("datepicker-day"),this.collateDatesForSelect(f)),this.isWeekendDay(b,f)&&a.push("weekend"),this.isInactive(f)||this.isNextDay(f)&&!this.isNextDayDeliveryPossible(f)?e.push('<td class="',a.join(" "),'">',"X","</td>"):(a.push("active"),e.push('<td data-date="'),e.push(this.getShortDate(f)),e.push('" class="'),e.push(a.join(" ")),e.push('">'),e.push(f),e.push("</td>")),f++):e.push('<td class="empty">&nbsp;</td>');if(f>d&&k>=6)break;e.push("</tr><tr>"),k++}return e.push("</tr>"),util.applyTemplate(this.template.datepicker,{daynames:this.getDays(),days:e.join("")})},toggleScrollbarHighlight:function(){var a,c,d,e,f,g;return a=b(".scrolly"),c=a.scrollTop(),f=b(".scrollbar.up"),g=b(".scrollbar.down"),d=a[0].scrollHeight,e=a.outerHeight(),d-e>c&&g.addClass("active"),c>0&&f.addClass("active"),0>=c&&(f.removeClass("active"),this.scrollStop()),c>=d-e&&(g.removeClass("active"),this.scrollStop()),this},scrollListContent:function(a){var c,d,e;return d=b(".scrolly"),c=d.scrollTop(),e=this.options.scrollSpeed,d.scrollTop("up"===a?c-e:c+e),this.toggleScrollbarHighlight(),this},scrollStart:function(a){var b=this;return["mobile","tablet"].contains(this.device)||!this.options.largeDeviceSmoothScroll?this.scrollListContent(a):!function c(){b.scrollListContent(a),b.scrollInterval=setTimeout(c,100)}(),this},scrollStop:function(){return this.options.largeDeviceSmoothScroll&&clearTimeout(this.scrollInterval),this},updateSelection:function(a,b){return this.selectedDateAndTime[a]=b,(!this.options.showTimes&&this.selectedDateAndTime.date||this.options.showTimes&&this.selectedDateAndTime.date&&this.selectedDateAndTime.time)&&this.showSelectedDate(),!this.options.showTimes&&this.selectedDateAndTime.date&&this.showSelectedDate(),this},clearSelectedDate:function(){return this.selectedDateAndTime={},b(".message").html(""),this},showSelectedDate:function(){var a;return a=this.options.showTimes?this.selectedDateAndTime.date+" "+this.selectedDateAndTime.time:this.selectedDateAndTime.date,this},getSelectedDateAndTime:function(){return this.selectedDateAndTime},revealAPI:function(){return{init:this.init.bind(this),getSelectedDateAndTime:this.getSelectedDateAndTime.bind(this)}}},b(function(){b("body").on("click",".direction.on",function(){c.calculateDatepicker({month:b(this).data("month"),year:b(this).data("year")})}),b(c.options.datepickerContainer).on("click",".datepicker-day",function(){var a=b(this).data("date");c.changeDateInDatepicker(a).updateSelection("date",a).changeDateInSelect(a)}),b(c.options.datepickerContainer).on("click",".datetime",function(){var a=b(this).data("time");c.changeTimeInDatepicker(a).updateSelection("time",a).changeTimeInSelect(a)}),b(c.options.datepickerContainer).on("mousedown",".scrollbar.up",function(){b(this).hasClass("active")&&c.scrollStart("up")}),b(c.options.datepickerContainer).on("mousedown",".scrollbar.down",function(){b(this).hasClass("active")&&(console.log("message"),c.scrollStart("down"))}),b(c.options.datepickerContainer).on("mouseup",".scrollbar.up, .scrollbar.down",function(){c.scrollStop()}),b(".fa-calendar").click(function(){c.toggleDatepicker()}),b("body").on("change",".availabledates",function(){var a=b(".availabledates option:selected").data("date");c.updateSelection("date",a).changeDateInDatepicker(a)}),b("body").on("change",".availabletimes",function(){var a=b(".availabletimes option:selected").data("time");c.updateSelection("time",a).changeTimeInDatepicker(a)})}),c.revealAPI()}a.Venda=a.Venda||{},a.Venda.Datepicker=b(a.Venda,a.jQuery)}(this);
//# sourceMappingURL=venda.datepicker-1.0.0.map